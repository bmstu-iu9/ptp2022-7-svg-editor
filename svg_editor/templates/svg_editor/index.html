{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<title>СВГ-Редактор</title>
	<!--    загружать статику нужно именно так-->
    <link rel="stylesheet" href="{% static 'svg_editor/css/main.css' %}? 202207260805">
    <link rel="stylesheet" href="../../static/svg_editor/css/main.css">
</head>
<body>
	<p style="font-size: 25px; font-weight: bold">
		{% if user.is_authenticated %}
		<a href="{% url 'account' %}">{{user.get_username}}</a>
		{% else %}
		<a href="{% url 'login' %}">Login!</a>
		{% endif %}
	</p>
	<h1>СВГ Редактор</h1>

	<div style="display: flex; width: 100%; margin: auto">
		<svg id="workspace"
			 version="1.1"
     		 xmlns="http://www.w3.org/2000/svg"
			 xmlns:xlink="http://www.w3.org/1999/xlink"/>
		<div id="layer_panel"></div>
	</div>
	<div id="controls" onchange="changeToolEvent()">
		<input type="radio" name="toolChoice" value="pencil" checked>
		<label>Карандаш</label><br>		

		<input type="radio" name="toolChoice" value="line">
		<label>Линия</label><br>

		<input type="radio" name="toolChoice" value="polygon">
		<label>Полигон</label><br>

		<input type="radio" name="toolChoice" value="path">
		<label>Контур</label><br>

		<input type="radio" name="toolChoice" value="text">
		<label>Текст</label><br>

		<input type="radio" name="toolChoice" value="ellipse">
		<label>Эллипс</label><br>

		<input type="radio" name="toolChoice" value="rect">
		<label>Прямоугольник</label><br>

		<input type="radio" name="toolChoice" value="fill" checked>
		<label>Заливка</label><br>

		<label>Цвет: </label>
		<input id="colorChoice" type="color"><br>
		<label>Заполнение фигур: </label>
		<input id="fillChoice" type="checkbox"><br>
		<label>Толщина линий: </label>
		<input id="widthChoice" type="number" min=1 value=3><p>
		<button id="clearWorkspaceButton">Очистить холст</button>

		<button id="createLayerButton">new layer</button>
		<button id="deleteLayerButton">delete layer</button>
		<button id="createNewFileButton">new file</button>
		<input id="opacity_slider" onchange="changeOpacity()" type="range" min="0" max="1" step="0.01" value="1">
	</div>

	<div style="padding-top: 50px"><label>Name your file: </label>
	<input type="text" id="fileNameInput" value="untitled" style="width: 300px">
	<select id="save_file_type" size=1>
		<option value="svg">.svg</option>
		<option value="yml">.yml</option>
	</select>
		</div><p>
	<button id="saveFileButton">Save it!</button>
	<button id="saveAsFileButton">Save it as!</button>

	<div class="panel">
		<button id="target">Reload</button>
		<button id="editButton">Edit</button>
		<button id="downloadButton">Download</button>
		<button id="deleteButton">Delete</button>
		<input id="deleteAll" type="checkbox">Delete all
		<p id="text">Click on the Reload button to get a list of saved files!<p>
		<ul id="list_svg"></ul>
	</div>

	<br>
	<input type="file" id="file" />
	<br>
	{% block javascript %}
	<script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@3.0/dist/svg.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script>
		const token = "{{csrf_token}}",
			saveURL = "{% url 'files_save' %}",
			uploadURL = "{% url 'files_upload' %}",
			downloadURL = "{% url 'files_download' %}",
			viewURL = "{% url 'files_view' %}",
			loadURL = "{% url 'files_get' %}",
			deleteURL = "{% url 'files_delete' %}";

		const workspace = document.querySelector('#workspace');
	</script>
	<script src="{% static 'svg_editor/js/main.js' %}? 20220714154345"></script>
	<script src="{% static 'svg_editor/js/layers.js' %}? 202207232241"></script>
	<script src="{% static 'svg_editor/js/draw.js' %}? 20220714154345"></script>
	{% endblock javascript %}
</body>
</html>