{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<title>SVG-Editor</title>
	<!--    загружать статику нужно именно так-->
    <link rel="stylesheet" href="{% static 'svg_editor/css/main.css' %}? 20223507141345">
    <link rel="stylesheet" href="../../static/svg_editor/css/main.css">
</head>
<body style="background: #ccc">
	<p style="font-size: 25px; font-weight: bold">
		{% if user.is_authenticated %}
		{{user.get_username}}
		<a href="{% url 'logout' %}">Logout!</a>
		{% else %}
		<a href="{% url 'login' %}">Login!</a>
		<a href="{% url 'signup' %}">Signup!</a>
		{% endif %}
	</p>
	<h1>SVG Editor</h1>

	<div style="display: flex">
		<svg id="workspace" 
		onmousedown="return logMouse('down', event)" 
		onmouseup="return logMouse('up', event)" 
		onmousemove="return logMouse('move', event)" 
		onmouseleave="return logMouse('up', event)"
		version="1.1"
     	xmlns="http://www.w3.org/2000/svg" 
		xmlns:xlink="http://www.w3.org/1999/xlink"></svg>
		<div id="layer-control-panel"></div>
	</div>
	<div id="controls">
		<input id="panсilTool" type="radio" name="tool" checked>
		<label>Карандаш</label><br>
		
		<input id="lineTool" type="radio" name="tool">
		<label>Линия</label><br>
		
		<input id="polygonTool" type="radio" name="tool">
		<label>Полигон</label><br>
		
		<input id="fillTool" type="radio" name="tool">
		<label>Заливка(в разработке)</label><br>
		
		<label>Цвет: </label>
		<input id="color" type="color"><br>
		<label>Заполнение фигур: </label>
		<input id="fillButton" type="checkbox"><br>
		<label>Толщина линий: </label>
		<input id="width" type="number" min=1 value=3><p>
		<button id="clearButton">Очистить холст</button>

		<button onclick="createLayer()">new layer</button>
		<button onclick="deleteLayer()">delete layer</button>
		<input id="opacity-slider" onchange="changeOpacity()" type="range" min="0" max="1" step="0.01" value="1">
	</div>

	<div style="padding-top: 50px"><label>Name your file: </label>
	<input type="text" id="file_name" value="untitled" style="width: 300px">
	<label>.svg</label>
		</div><p>
	<button id="saveButton">Save it!</button>
	<div class="panel">
		<button id="target">Reload</button>
		<button id="editButton">Edit</button>
		<p id="text">Click on the Reload button to get a list of saved files!<p>
		<ul id="list_svg"></ul>
	</div>

	<br>
	<input type="file" id="file" />
	<br>
	<p>
		<label>Download file name: </label>
		<input type="text" id="download_file_name" value="untitled" style="width: 300px">
		<label>.svg</label>
	</p>
	<button id="downloadButton">Download it!</button>

	{% block javascript %}
	<script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@3.0/dist/svg.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script>
		const token = "{{csrf_token}}",
		      saveURL = "{% url 'files_save' %}",
		      uploadURL = "{% url 'files_upload' %}",
			  downloadURL = "{% url 'files_download' %}",
			  reloadURL = "{% url 'files_view' %}";
	</script>
	<script src="{% static 'svg_editor/js/main.js' %}? 20220714154345"></script>
	<script src="{% static 'svg_editor/js/layers.js' %}? 20220714154345"></script>
	<script src="{% static 'svg_editor/js/draw.js' %}? 20220714154345"></script>
	{% endblock javascript %}
</body>
</html>